ğŸ”„ Toggle: local state = false server state = false
chat-interface.tsx:611 ğŸ”” Starting notification permission request...
chat-interface.tsx:613 ğŸ”” Permission result: granted
chat-interface.tsx:616 ğŸ”” Permission granted, starting push setup...
chat-interface.tsx:78 ğŸ”” Starting push notification setup...
chat-interface.tsx:79 ğŸ“± Notifications enabled: false
chat-interface.tsx:80 ğŸ“± Is iOS: false
chat-interface.tsx:81 ğŸ“± Is standalone mode: false
chat-interface.tsx:82 ğŸ“± User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
chat-interface.tsx:83 ğŸ“± Service worker support: true
chat-interface.tsx:84 ğŸ“± Push manager support: true
chat-interface.tsx:87 âŒ Notifications not enabled, skipping push setup
chat-interface.tsx:627 âœ… Push setup completed successfully - enabling bell icon
chat-interface.tsx:861 ğŸ”” Room joined, setting up push notifications for room: 18a4ff
chat-interface.tsx:867 âœ… Permission granted AND notifications enabled, setting up push for room: 18a4ff
chat-interface.tsx:78 ğŸ”” Starting push notification setup...
chat-interface.tsx:79 ğŸ“± Notifications enabled: true
chat-interface.tsx:80 ğŸ“± Is iOS: false
chat-interface.tsx:81 ğŸ“± Is standalone mode: false
chat-interface.tsx:82 ğŸ“± User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36
chat-interface.tsx:83 ğŸ“± Service worker support: true
chat-interface.tsx:84 ğŸ“± Push manager support: true
chat-interface.tsx:97 ğŸ“± Waiting for service worker to be ready...
chat-interface.tsx:668 ğŸ”“ Toggle process completed - unblocking notifications
chat-interface.tsx:678 Chat interface received message: server-heartbeat {type: 'server-heartbeat'}
chat-interface.tsx:678 Chat interface received message: new-message {type: 'new-message', message: {â€¦}}
chat-interface.tsx:722 Triggering notification for new message from:  Eee
chat-interface.tsx:394 showNotification called: {title: ' Eee in Chat Room', message: 'Yeyeye', notificationsEnabled: true, hasFocus: false, isStandalone: false}
chat-interface.tsx:424 Attempting to show service worker notification
chat-interface.tsx:678 Chat interface received message: pong {type: 'pong'}
chat-interface.tsx:358 ğŸ”„ App focused - syncing with server
chat-interface.tsx:299 ğŸ“± Visibility changed: true hidden
chat-interface.tsx:310 ğŸ  App backgrounded - notifying server for push notifications
chat-interface.tsx:331 ğŸ”„ Syncing with server - checking subscription status...
chat-interface.tsx:499 ğŸ” Checking server subscription status via cookies...
chat-interface.tsx:502 ğŸ“¡ Making API call to: /api/push-status
chat-interface.tsx:507 ğŸ“¡ Response status: 200 OK
chat-interface.tsx:511 ğŸ“¡ Response content-type: application/json; charset=utf-8
chat-interface.tsx:515 ğŸ“‹ Server subscription status: false
chat-interface.tsx:337 ğŸ“‹ Server subscription status: false
chat-interface.tsx:338 ğŸ”” Current notification permission: granted
chat-interface.tsx:339 ğŸ”” Local enabled state: true
chat-interface.tsx:343 âš ï¸  Server state differs from local! Syncing to server: false
chat-interface.tsx:678 Chat interface received message: new-message {type: 'new-message', message: {â€¦}}
chat-interface.tsx:722 Triggering notification for new message from:  Eee
chat-interface.tsx:394 showNotification called: {title: ' Eee in Chat Room', message: 'Hehehee', notificationsEnabled: true, hasFocus: false, isStandalone: false}
chat-interface.tsx:424 Attempting to show service worker notification
chat-interface.tsx:217 âŒ Failed to setup push notifications: Error: Service worker timeout
    at chat-interface.tsx:100:60
chat-interface.tsx:869 âœ… Push notifications ready for room: 18a4ff
chat-interface.tsx:678 Chat interface received message: pong {type: 'pong'}
chat-interface.tsx:299 ğŸ“± Visibility changed: false visible
chat-interface.tsx:301 ğŸ‘€ App foregrounded - notifying server
chat-interface.tsx:358 ğŸ”„ App focused - syncing with server
chat-interface.tsx:331 ğŸ”„ Syncing with server - checking subscription status...
chat-interface.tsx:499 ğŸ” Checking server subscription status via cookies...
chat-interface.tsx:502 ğŸ“¡ Making API call to: /api/push-status
chat-interface.tsx:507 ğŸ“¡ Response status: 200 OK
chat-interface.tsx:511 ğŸ“¡ Response content-type: application/json; charset=utf-8
chat-interface.tsx:515 ğŸ“‹ Server subscription status: false
chat-interface.tsx:337 ğŸ“‹ Server subscription status: false
chat-interface.tsx:338 ğŸ”” Current notification permission: granted
chat-interface.tsx:339 ğŸ”” Local enabled state: true
chat-interface.tsx:343 âš ï¸  Server state differs from local! Syncing to server: false
chat-interface.tsx:678 Chat interface received message: server-heartbeat {type: 'server-heartbeat'}
chat-interface.tsx:678 Chat interface received message: pong {type: 'pong'}